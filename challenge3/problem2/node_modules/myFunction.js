var MySQLRealEscapeStringModule = require('./mysql_real_escape_string');

exports.myFunction = function (myCode) 
{
	// Checks if myCode character length is greater than 32.
	if (myCode.length <= 32)
	{

		// Using mysql_real_escape_string module from code challenge 1 
		// to deal with SQL Injection by appending "\" to comprise characters.
		myCode = MySQLRealEscapeStringModule.mysql_real_escape_string(myCode);

		// SQL statement from problem (1)
		var SQLStatement = "SELECT * FROM coupons WHERE code = \"" 
				   + myCode 
				   + "\"";
       		return SQLStatement;
	}
	else
	{
		throw new Error("INVALID CODE: Code must be 32 characters or less.");
	}
}
